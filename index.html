<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Dhamma Canvas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Custom animation for the pulse effect */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Custom animation for fade in */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        /* Basic dark theme for the body */
        body {
            background-color: #030712; /* slate-950 */
        }
    </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-cyan-500 selection:text-white flex flex-col items-center p-4 md:p-8">

    <div id="dhamma-canvas" class="w-full max-w-4xl">
        </div>

    <script>
        // Use Lucide Icons names corresponding to the React imports
        const iconMap = {
            'Cpu': 'cpu',
            'Shield': 'shield',
            'Activity': 'activity',
            'Database': 'database',
            'Code': 'code',
            'Power': 'power',
            'Terminal': 'terminal',
            'ArrowRight': 'arrow-right',
            'ArrowLeft': 'arrow-left',
            'Lock': 'lock',
            'Zap': 'zap'
        };

        const steps = [
            {
                id: 'intro',
                title: 'පද්ධතිය හඳුනාගැනීම (System Overview)',
                icon: 'Cpu',
                content: 'අපගේ ජීවිතය පරිගණක පද්ධතියකට සමානය. දෘඩාංග (Hardware) යනු ශරීරයයි. මෘදුකාංග (Software) යනු මනසයි. නිර්වාණය යනු මෙම පද්ධතියේ ඇති "Bug" (දුක) සම්පූර්ණයෙන්ම ඉවත් කර, අනවශ්‍ය Loop එකෙන් මිදීමයි.',
                visual: `
                    <div class="flex flex-col items-center justify-center p-6 bg-slate-800 rounded-lg border border-cyan-500/30 shadow-lg shadow-cyan-500/20">
                        <div class="relative">
                            <i data-lucide="cpu" class="w-20 h-20 text-cyan-400 animate-pulse"></i>
                            <div class="absolute top-0 right-0 w-3 h-3 bg-green-500 rounded-full animate-ping"></div>
                        </div>
                        <div class="mt-4 text-cyan-200 font-mono text-sm">System Status: Online</div>
                        <div class="mt-1 text-slate-400 text-xs">Processing Input...</div>
                    </div>
                `
            },
            {
                id: 'sila',
                title: 'පියවර 1: සීලය (The Firewall)',
                icon: 'Shield',
                content: 'සීලය යනු පරිගණකයේ ආරක්ෂක පද්ධතියයි (Firewall & Antivirus). වෛරස් (අකුසල්) ඇතුල් වීම වැළැක්වීමට සහ පද්ධතියේ දත්ත ආරක්ෂා කිරීමට මෙය අත්‍යවශ්‍ය වේ.',
                details: [
                    'Firewall On: පන්සිල් රැකීම.',
                    'Malware Blocked: වැරදි ක්‍රියා සහ වචන පාලනය.',
                    'System Integrity: සිතේ පිරිසිදුකම ආරක්ෂා වීම.'
                ],
                visual: `
                    <div class="w-full max-w-md bg-slate-900 p-4 rounded-lg font-mono text-xs border border-green-500/30">
                        <div class="flex justify-between items-center border-b border-slate-700 pb-2 mb-2">
                            <span class="text-green-400 flex items-center gap-2"><i data-lucide="lock" class="w-3.5 h-3.5"></i> SECURITY LOG</span>
                            <span class="text-slate-500">Live</span>
                        </div>
                        <div class="space-y-2">
                            <div class="text-green-300">[ALLOW] යහපත් සිතුවිලි...</div>
                            <div class="text-red-400">[BLOCK] බොරු කීම (Threat Detected)</div>
                            <div class="text-red-400">[BLOCK] සත්ව ඝාතනය (Critical Error)</div>
                            <div class="text-green-300">[STATUS] System Protected. Ready for Optimization.</div>
                        </div>
                    </div>
                `
            },
            {
                id: 'samadhi',
                title: 'පියවර 2: සමාධිය (Task Manager)',
                icon: 'Activity',
                content: 'සමාධිය යනු "Background Processes" නැවැත්වීමයි. අනවශ්‍ය වැඩසටහන් (කාම විතර්ක) වසා දමා, මුළු CPU බලයම එකම අරමුණකට (Main Task) යොමු කිරීමයි.',
                details: [
                    'End Task: විසිරුණු සිතුවිලි නැවැත්වීම.',
                    'Focus Mode: ආනාපාන සතිය (හුස්ම දෙස බැලීම).',
                    'Performance Boost: සිතේ වේගය සහ බලය වැඩි වීම.'
                ],
                visual: `
                    <div class="w-full max-w-md bg-slate-800 p-4 rounded-lg border border-yellow-500/30">
                        <div class="flex justify-between text-xs text-slate-400 mb-2">
                            <span>PROCESS</span>
                            <span>CPU USAGE</span>
                        </div>
                        <div class="space-y-2 font-mono text-sm">
                            <div class="flex justify-between text-slate-500 line-through">
                                <span>Future_Worry.exe</span>
                                <span>15%</span>
                            </div>
                            <div class="flex justify-between text-slate-500 line-through">
                                <span>Past_Regret.exe</span>
                                <span>20%</span>
                            </div>
                            <div class="flex justify-between text-slate-500 line-through">
                                <span>Desire_Loop.js</span>
                                <span>40%</span>
                            </div>
                            <div class="flex justify-between bg-yellow-900/40 p-2 rounded text-yellow-300 border border-yellow-500/50">
                                <span class="flex items-center gap-2"><i data-lucide="zap" class="w-3.5 h-3.5"></i> MEDITATION_FOCUS</span>
                                <span>99%</span>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: 'sanskara',
                title: 'සංස්කාර සහ අනිත්‍ය (RAM & Cache)',
                icon: 'Database',
                content: 'සංස්කාර යනු RAM එකේ හෝ Cache එකේ ඇති තාවකාලික දත්තයි. ඒවා මොහොතින් මොහොත අලුත් වේ. ඒවා "මගේ" යැයි සිතා Hard Disk එකේ (සසරේ) තැන්පත් කරගැනීමෙන් සිදුවන්නේ System එක Slow වීමයි (දුක).',
                details: [
                    'RAM Data: සිතුවිලි සහ හැඟීම් (ඇති වී නැති වී යයි).',
                    'Memory Leak: අනිත්‍ය දේ අල්ලාගෙන සිටීම.',
                    'Clear Cache: අතීත බැඳීම් අත්හැරීම.'
                ],
                visual: `
                    <div class="flex gap-4 justify-center items-center">
                        <div class="w-24 h-32 bg-slate-700 rounded flex flex-col items-center justify-center border-2 border-orange-400/50 relative overflow-hidden">
                            <div class="absolute inset-0 bg-orange-500/10 animate-pulse"></div>
                            <span class="text-xs text-orange-300 mb-1">RAM</span>
                            <div class="text-2xl font-bold text-white">DATA</div>
                            <div class="text-[10px] text-slate-300">Writing...</div>
                        </div>
                        <i data-lucide="arrow-right" class="w-5 h-5 text-slate-500"></i>
                        <div class="w-24 h-32 bg-slate-700 rounded flex flex-col items-center justify-center border-2 border-slate-600 border-dashed">
                            <span class="text-xs text-slate-400 mb-1">Saved?</span>
                            <div class="text-xs text-center text-slate-300 px-1">Error: Corrupted (Anicca)</div>
                        </div>
                    </div>
                `
            },
            {
                id: 'panna',
                title: 'පියවර 3: ප්‍රඥාව (Reading the Source Code)',
                icon: 'Code',
                content: 'ප්‍රඥාව යනු User Interface (UI) එකට රැවටීම නොව, ඊට පිටුපස ඇති Source Code එක දැකීමයි. "මම" යනු Avatar එකක් පමණක් බවත්, සියල්ල 0 සහ 1 (නාම රූප) පමණක් බවත් අවබෝධ කර ගැනීමයි.',
                details: [
                    'UI (Illusion): ලස්සන, රස, සැප (මායාව).',
                    'Source Code (Reality): හේතු ඵල දහම (Code Logic).',
                    'Debugging: දුකට හේතුව කේතය තුළින්ම සොයා ගැනීම.'
                ],
                visual: `
                    <div class="w-full max-w-md bg-black p-4 rounded-lg font-mono text-xs text-green-500 border border-slate-700 shadow-inner h-40 overflow-hidden relative">
                        <div class="absolute top-0 right-0 p-1 bg-blue-600 text-white text-[10px]">Developer Console</div>
                        <p class="opacity-50"> // Analyzing "Self"</p>
                        <p> function checkSelf() &#123;</p>
                        <p class="pl-4"> if (body == permanent) return true; </p>
                        <p class="pl-4"> if (mind == permanent) return true; </p>
                        <p class="pl-4 text-red-400"> return false; // Not Found (Anatta)</p>
                        <p> &#125;</p>
                        <p class="mt-2 text-blue-300">> Insight gained: Reality is empty.</p>
                    </div>
                `
            },
            {
                id: 'nirvana',
                title: 'අවසානය: නිර්වාණය (System Shutdown)',
                icon: 'Power',
                content: 'නිර්වාණය යනු මෙම වෙහෙසකර OS එකෙන් සහ ලූප් එකෙන් (Reboot වීමෙන්) සම්පූර්ණයෙන්ම නිදහස් වීමයි. බැඳීම් (Links) සියල්ල ඉවත් කර, සිසිල් වූ (Cooling Fan) තත්වයට පත් වීමයි.',
                details: [
                    'No Reboot: නැවත ඉපදීමක් නැත.',
                    'Bug Free: කෙලෙස් නැත.',
                    'Ultimate Peace: පරම සැනසීම.'
                ],
                visual: `
                    <div class="flex flex-col items-center justify-center">
                        <div class="w-32 h-32 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 blur-xl absolute opacity-30"></div>
                        <i data-lucide="power" class="w-20 h-20 text-white relative z-10 drop-shadow-[0_0_15px_rgba(255,255,255,0.8)]"></i>
                        <div class="mt-6 text-2xl font-light tracking-widest text-white">NIBBANA</div>
                        <div class="text-slate-400 text-sm mt-2">The Loop Has Ended.</div>
                    </div>
                `
            },
            {
                id: 'routine',
                title: 'ඔබේ දින චර්යාව (Daily Algorithm)',
                icon: 'Terminal',
                content: 'මෙම දැනුම ප්‍රායෝගිකව භාවිතා කිරීමට සරල ඇල්ගොරිතමයක්.',
                isRoutine: true,
                visual: null
            }
        ];

        let currentStep = 0;
        const totalSteps = steps.length;
        const container = document.getElementById('dhamma-canvas');

        function getIconHtml(iconName, size, className) {
            const lucideName = iconMap[iconName];
            if (!lucideName) return '';
            return `<i data-lucide="${lucideName}" class="${className}" style="width:${size}px; height:${size}px;"></i>`;
        }

        function renderDetails(details) {
            if (!details) return '';
            return `
                <ul class="space-y-3 mt-4 bg-slate-900/50 p-4 rounded-lg">
                    ${details.map((detail, idx) => `
                        <li key="${idx}" class="flex items-start gap-2 text-sm text-slate-300">
                            <span class="text-cyan-500 mt-1">➜</span>
                            ${detail}
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function renderRoutine() {
            return `
                <div class="bg-slate-900 border border-purple-500/30 rounded-lg p-4 font-mono text-sm space-y-4 shadow-lg shadow-purple-900/10">
                    <div class="flex gap-3 items-start">
                        <div class="bg-purple-900/50 text-purple-300 px-2 py-1 rounded text-xs">06:00 AM</div>
                        <div>
                            <strong class="text-purple-300 block">System Boot (සීලය පිහිටුවීම)</strong>
                            <span class="text-slate-400">පන්සිල් සමාදන් වී Firewall එක Activate කරන්න. දවස පුරා වැරදි වැඩ නොකරන බවට Setting එක හදාගන්න.</span>
                        </div>
                    </div>
                    <div class="flex gap-3 items-start">
                        <div class="bg-yellow-900/50 text-yellow-300 px-2 py-1 rounded text-xs">Day Time</div>
                        <div>
                            <strong class="text-yellow-300 block">Run in Safe Mode (සිහිය පවත්වා ගැනීම)</strong>
                            <span class="text-slate-400">වැඩ කරන අතරතුර වෙනත් සිතිවිලි (Pop-ups) එන විට ඒවා ක්ෂණිකව වසා දමන්න (Close Window).</span>
                        </div>
                    </div>
                    <div class="flex gap-3 items-start">
                        <div class="bg-blue-900/50 text-blue-300 px-2 py-1 rounded text-xs">08:00 PM</div>
                        <div>
                            <strong class="text-blue-300 block">Defragmentation (භාවනාව)</strong>
                            <span class="text-slate-400">විනාඩි 20ක් සියලු වැඩ නවතා CPU එක සිසිල් කරන්න (ආනාපාන සතිය).</span>
                        </div>
                    </div>
                    <div class="flex gap-3 items-start">
                        <div class="bg-green-900/50 text-green-300 px-2 py-1 rounded text-xs">End Day</div>
                        <div>
                            <strong class="text-green-300 block">Log Review (විපස්සනාව)</strong>
                            <span class="text-slate-400">අද දවස දෙස ආපසු බලන්න. වුණු දේවල් මතක පමණයි (Cache). ඒවා අල්ලා නොගෙන නිදාගන්න.</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderVisual(step) {
            if (step.visual) {
                return step.visual;
            }
            if (step.isRoutine) {
                return `
                    <div class="text-center">
                        ${getIconHtml('Terminal', 64, 'text-purple-500 mx-auto mb-4')}
                        <p class="text-purple-300">Executing Daily Algorithm...</p>
                    </div>
                `;
            }
            return '';
        }

        function updateContent() {
            const step = steps[currentStep];

            container.innerHTML = `
                <header class="w-full max-w-4xl flex items-center justify-between mb-8 border-b border-slate-800 pb-4">
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
                            Digital Dhamma
                        </h1>
                        <p class="text-slate-500 text-sm">Tech Metaphors for Ancient Wisdom</p>
                    </div>
                    <div class="flex gap-2">
                        ${steps.map((s, idx) => `
                            <div 
                                class="h-2 w-2 rounded-full transition-all duration-300 ${idx === currentStep ? 'bg-cyan-400 w-6' : 'bg-slate-700'}"
                            ></div>
                        `).join('')}
                    </div>
                </header>

                <main class="w-full max-w-4xl flex-1 flex flex-col md:flex-row gap-8 items-center justify-center">
                    
                    <div class="flex-1 space-y-6 animate-fadeIn">
                        <div class="flex items-center gap-4 mb-2">
                            <div class="p-3 bg-slate-900 rounded-xl border border-slate-700 shadow-lg">
                                ${getIconHtml(step.icon, 40, `text-${step.icon.toLowerCase() === 'power' ? 'white' : step.icon.toLowerCase() === 'code' ? 'blue-400' : step.icon.toLowerCase() === 'database' ? 'orange-400' : step.icon.toLowerCase() === 'activity' ? 'yellow-400' : step.icon.toLowerCase() === 'shield' ? 'green-400' : step.icon.toLowerCase() === 'terminal' ? 'purple-400' : 'cyan-400'}`)}
                            </div>
                            <h2 class="text-2xl font-bold text-white">${step.title}</h2>
                        </div>
                        
                        <p class="text-lg text-slate-300 leading-relaxed border-l-4 border-cyan-500/50 pl-4">
                            ${step.content}
                        </p>

                        ${renderDetails(step.details)}

                        ${step.isRoutine ? renderRoutine() : ''}
                    </div>

                    <div class="flex-1 w-full flex items-center justify-center min-h-[300px] bg-slate-900/50 rounded-2xl border border-slate-800 p-8 shadow-2xl backdrop-blur-sm">
                        ${renderVisual(step)}
                    </div>

                </main>

                <footer class="w-full max-w-4xl mt-8 flex justify-between items-center pt-6 border-t border-slate-800">
                    <button id="prevBtn"
                        class="flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${currentStep === 0 ? 'text-slate-600 cursor-not-allowed' : 'bg-slate-800 text-white hover:bg-slate-700'}">
                        ${getIconHtml('ArrowLeft', 18, '')} Back
                    </button>

                    <span class="text-slate-500 font-mono text-sm">
                        Step ${currentStep + 1} of ${totalSteps}
                    </span>

                    <button id="nextBtn"
                        class="flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${currentStep === totalSteps - 1 ? 'text-slate-600 cursor-not-allowed' : 'bg-cyan-600 text-white hover:bg-cyan-500 shadow-lg shadow-cyan-900/20'}">
                        Next ${getIconHtml('ArrowRight', 18, '')}
                    </button>
                </footer>
            `;

            // Re-render Lucide icons after setting innerHTML
            lucide.createIcons();

            // Add event listeners for navigation
            document.getElementById('prevBtn').onclick = prevStep;
            document.getElementById('prevBtn').disabled = currentStep === 0;

            document.getElementById('nextBtn').onclick = nextStep;
            document.getElementById('nextBtn').disabled = currentStep === totalSteps - 1;
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateContent();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateContent();
            }
        }

        // Initial render
        updateContent();
    </script>
</body>
</html>
